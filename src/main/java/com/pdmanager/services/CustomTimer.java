package com.pdmanager.services;import java.util.Date;import java.util.Timer;import java.util.TimerTask;/** * Created by Alexander Balasanov on 1/3/16. */public class CustomTimer extends Timer {    public static class TimeoutTask extends TimerTask{        private CustomTimer timer = null ;        public TimeoutTask(){            this.timer = timer ;        }        public void run(){            onTimeoutOccured(timer.value);        }        public  void onTimeoutOccured(Object value){}    }    private Object value = null ;    private long timeout = 0 ;    public CustomTimer(String name,Object value,long timeout){        super(name);        this.value = value ;        this.timeout = timeout ;    }    public Object value(){        return value ;    }    public void cancel(){        value = null ;        super.cancel();    }    public void schedule(TimerTask task, Date when) {        if(task instanceof TimeoutTask){            ((TimeoutTask)task).timer = this ;        }        super.schedule(task,when);    }    public void schedule(TimerTask task, long delay) {        if(task instanceof TimeoutTask){            ((TimeoutTask)task).timer = this ;        }        super.schedule(task,delay);    }    public void schedule(TimerTask task, long delay, long period) {        if(task instanceof TimeoutTask){            ((TimeoutTask)task).timer = this ;        }        super.schedule(task,delay,period);    }    public void schedule(TimerTask task, Date when, long period) {        if(task instanceof TimeoutTask){            ((TimeoutTask)task).timer = this ;        }        super.schedule(task,when,period);    }    public void scheduleAtFixedRate(TimerTask task, long delay, long period) {        if(task instanceof TimeoutTask){            ((TimeoutTask)task).timer = this ;        }        super.scheduleAtFixedRate(task, delay, period);    }    public void scheduleAtFixedRate(TimerTask task, Date when, long period) {        if(task instanceof TimeoutTask){            ((TimeoutTask)task).timer = this ;        }        super.scheduleAtFixedRate(task, when, period);    }}